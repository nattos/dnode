
float2 center = gid_xy_norm;

float4 acc = 0.0;
for (int i = 0; i < WeightsLength; ++i) {
  float3 entry = Weights[i];
  float2 offset = entry.xy;
  float weight = entry.z;
  acc += SampleTexture<filter::linear, address::clamp_to_edge>(tex, center + offset) * weight;
}

acc *= InvTotalWeight;
out = acc;
